# GPT-Academic Report
## Title:



MapGPT: An Autonomous Framework for Cartographic Mapping with a Large Language Model

## Abstract:



Cartographic mapping aims to visually represent geographic information on the surface of the Earth through the creation of maps, which helps to enhance understanding of geographical locations, navigation, planning, and the analysis of geographical phenomena. The cartographic mapping process generally involves intricate operations, such as symbol design, layout design, and text annotation, demanding a high level of professional expertise. Moreover, to create a standardized and visually appealing map product, map producers are also expected to possess a highly developed creative thinking ability. The high demand for map producers hinders the promotion and widespread adoption of mapping. Consequently, researchers are concentrating on techniques to automate and enhance the intelligence of the mapping process. For example, some studies attempt to train deep learning models for mapping, including methods like map style transfer. However, these approaches typically treat the entire map as a global input and generate a new map as output, lacking the flexibility to consider and control detailed elements within a map. Therefore, in this paper, we propose a large language model-based intelligent mapping framework, termed MapGPT, which can be used for mapping by considering the map as an integration of various map elements. Specifically, multiple professional mapping tools are designed in MapGPT, and each tool is designed to control a corresponding map element. For example, the DALL•E 3 model from OpenAI is incorporated to design creative and diverse symbol styles, and the compass tool is used to enable adaptive adjustments of the position and visual style of the compass element. With these tools, a large language model is used as the agent to first understand the demand of users based on mere natural language descriptions, and subsequently automatically invoke appropriate tools in sequence to generate a map. Furthermore, by leveraging the memory capabilities of large language models, MapGPT provides a user-friendly interactive advantage, which means users can dynamically adjust map elements, including color, annotations, and element positions. In conclusion, MapGPT provides a user-friendly mapping experience by utilizing natural language descriptions as the interface for user interactions. Extensive case studies have validated the effectiveness of this framework in cartographic mapping.

## # Meta Translation

标题：MapGPT：基于大型语言模型的自主制图框架

摘要：制图旨在通过创建地图来直观地表示地球表面的地理信息，从而帮助增强对地理位置、导航、规划和地理现象分析的理解。制图过程通常涉及复杂的操作，例如符号设计、布局设计和文字注释，要求具备**高度的专业知识**。此外，为了创建标准化和视觉上吸引人的地图产品，地图制作者还需要具备高度**发达的创造性思维能力**。地图制作者的高需求阻碍了制图的推广和广泛采用。因此，研究人员正在集中研究自动化和提高制图智能的技术。例如，一些研究尝试训练深度学习模型用于制图，包括地图样式转换等方法。然而，这些方法通常将整个地图视为一个整体输入，并生成一个新的地图作为输出，**缺乏考虑和控制地图内详细元素的灵活性**。因此，在本文中，我们提出了一个基于大型语言模型的智能制图框架，称为MapGPT，它可以通过将地图视为各种地图元素的集成来进行制图。具体来说，在MapGPT中设计了多种专业的制图工具，每个工具都用于控制相应的地图元素。例如，OpenAI的DALL•E 3模型被纳入用于设计创造性和多样的符号样式，而罗盘工具用于实现罗盘元素的位置和视觉样式的自适应调整。通过这些工具，大型语言模型被用作代理，首先基于自然语言描述理解用户需求，然后自动按顺序调用适当的工具生成地图。此外，通过利用大型语言模型的记忆功能，MapGPT提供了用户友好的交互优势，这意味着用户可以动态调整地图元素，包括颜色、注释和元素位置。总之，MapGPT通过利用自然语言描述作为用户交互的界面，提供了用户友好的制图体验。大量案例研究验证了该框架在制图中的有效性。

## # Introduction Part-1

Maps are fundamental tools in our lives, used ubiquitously. In our daily activities, they play a key role in navigation and information transmission (Vasiliev et al. 1990). For instance, maps can provide valuable spatial information for finding a specific spot in a city, planning a travel route, or understanding the geographical features of a certain area (Thorndyke and Hayes-Roth 1982). Generally, the most common understanding of maps is the representation of geographic information on the surface of the Earth, which is also of great interest to geographers (Andrews 1996, Soini 2001). Over time, maps continue to evolve, emerging in many new forms and applications, such as historical and cultural maps. However, despite their effectiveness in information transformation, cartographic mapping-the process of converting geographical data into visual elements on maps-requires a high level of professional expertise (Kraak 1998, Lloyd 1993). This expertise acts as a hindrance to the development and widespread application of maps.
Figure 1. The framework of MapGPT. Users first describe their demands by natural language text; subsequently, a Large Language Model (LLM) is used to interpret demands, plan tasks, and call appropriate tools in the Mapping Tool Module for different mapping tasks (a total of 59 tools). Multiple map elements are added to the map by the calling of corresponding tools. The final mapping result can be obtained when the used LLM believes this mapping task is finished.
Generally, there are two challenges for map designers and producers:

地图在我们的生活中是基本工具，被广泛使用。在我们的日常活动中，它们在导航和信息传递中发挥着关键作用（Vasiliev等，1990年）。例如，地图可以提供宝贵的空间信息，用于在城市中找到特定位置，规划旅行路线，或了解某一地区的地理特征（Thorndyke和Hayes-Roth，1982年）。通常，地图最常见的理解是在地球表面上表示地理信息，这也是地理学家极感兴趣的（Andrews，1996年；Soini，2001年）。随着时间的推移，地图不断发展，以许多新的形式和应用形式出现，如历史和文化地图。然而，尽管它们在信息传递方面非常有效，但制图工作——将地理数据转换为地图上的视觉元素的过程——需要高水平的专业知识（Kraak，1998年；Lloyd，1993年）。这种专业知识成为地图发展和广泛应用的障碍。

## # Introduction Part-2

• Complex map elements. First, a map contains various elements, such as the map scale bar, compass, legend, and frame, to name a few (see the map elements in Figure 1). Moreover, there are many parameters to control the details of each map element. For example, in the commercial software ArcGIS, users can change the color, shape, size, and transparency of map elements. Consequently, designers need to employ a variety of operations to control these elements during the mapping process, making it a complex and professional task. • The demand for creative thinking. Secondly, cartographic mapping is not a rigid task; rather, it is a creative process similar to writing a poem (Harmon and Clemans 2009). It serves as a response to environmental perception and the geographical imagination of humans (Lilley 2018). In essence, cartographic mapping is a combination of art and science, which demands creative thinking from map producers (Perkins 2003, Visvalingam 1989). For instance, map symbols are crucial elements in maps for representing geographical information. However, designing appropriate symbols for various geographical entities with different characteristics poses a challenge, a subject that researchers have focused on for a considerable amount of time (Robinson et al. 2012).
To sum up, cartographic mapping is a challenging task, which requires abundant knowledge from multiple disciplines to create a standardized and visually appealing map product. To simplify this process, researchers have dedicated significant efforts to the automation and intelligence of the mapping process (Bhatnagar et al. 2018, Kang et al. 2024, Brus et al. 2010, WANG 2022). During the early stages, researchers constructed numerous expert systems for mapping, such as map design (Skidmore et al. 1991, 1996, Eldrandaly 2006) and label placement (Lei et al. 2021). These systems were designed based on predefined rules extracted and formulated from expert knowledge. Subsequently, with the advancements in machine learning and artificial intelligence, scholars in GIScience are now leveraging AI methods to address complex geographic problems, also including mapping tasks (Kang et al. 2024). This emerging research focus is commonly referred to as Geospatial Artificial Intelligence (GeoAI) (Janowicz et al. 2020, Gao 2021). Generally, GeoAI models have exhibited superior performance in various geospatial tasks than previous methods, including expediting the intricate design processes of cartographic mapping tasks and facilitating cartographic creativity (Li et al. 2023, Usery et al. 2022, Song et al. 2023).

## 引言第二部分

### 复杂的地图元素
首先，地图包含多种元素，例如比例尺、指南针、图例和边框等（参见图1中的地图元素）。此外，有许多参数可用于控制每个地图元素的细节。例如，在商业软件ArcGIS中，用户可以更改地图元素的颜色、形状、大小和透明度。因此，设计师在制图过程中需要采用多种操作来控制这些元素，这使得制图成为一项复杂且专业的任务。

### 对创造性思维的需求
其次，制图并非一项僵硬的任务；相反，它是一个类似于写诗的创造性过程（Harmon和Clemans，2009）。它作为对环境感知和人类地理想象的响应（Lilley，2018）。本质上，制图是艺术与科学的结合，这要求地图制作者具备创造性思维（Perkins，2003；Visvalingam，1989）。例如，地图符号是地图中用于表征地理信息的关键元素。然而，为具有不同特征的各种地理实体设计合适的符号构成了一个挑战，这是研究者长时间关注的课题（Robinson等人，2012）。

总之，制图是一项挑战性的任务，需要来自多个学科的丰富知识，以创建标准化且视觉上吸引人的地图产品。为简化这一过程，研究人员已经在制图的自动化和智能化方面做出了重大努力（Bhatnagar等人，2018；Kang等人，2024；Brus等人，2010；WANG，2022）。在早期阶段，研究者构建了许多专家系统用于制图，如地图设计（Skidmore等人，1991，1996；Eldrandaly，2006）和标签放置（Lei等人，2021）。这些系统是基于从专家知识中提取和制定的预定义规则设计的。随后，随着机器学习和人工智能的进步，GIScience的学者们现在正在利用AI方法解决复杂的地理问题，包括制图任务（Kang等人，2024）。这一新兴的研究焦点通常被称为地理空间人工智能（GeoAI）（Janowicz等人，2020；Gao，2021）。总体而言，GeoAI模型在各种地理空间任务中表现出优于以往方法的性能，包括加速复杂的制图设计过程和促进制图创造力（Li等人，2023；Usery等人，2022；Song等人，2023）。

## # Introduction Part-3

For example, map style is a crucial design element, and it often requires a significant amount of time to develop appropriate styles for various applications (Benová andPravda 2009, Christophe et al. 2016). To solve this problem, Christophe et al. (2022) proposed the use of a Generative Adversarial Network (GAN) capable of transferring maps from a simple style (e.g., Plan maps) to more artistic styles. Furthermore, Kang et al. (2019) employed a GAN-based model for multiscale map style transferring. With the advancement of generative artificial intelligence, including text-to-image models like diffusion and DALL-E, some researchers are exploring the direct generation of maps based on natural language descriptions (Dunkel et al. 2023, Courtial et al. 2023). However, a common strategy of these methods is to treat the entire map as a global input and generate a new map as output, which lacks the flexibility to consider and control detailed elements within a map. In other words, a map is an integration of various map elements, and it is difficult to adjust only some parts of these elements using global-perspective models. Moreover, given that all contents are generated by deep models, the uncertainty and opacity of the resulting maps also raise significant ethical concerns about these methods (Kang et al. 2023, Griffin 2020).
Therefore, in this paper, we propose a Large Language Model (LLM)-based mapping framework, termed MapGPT, which can be used for mapping by considering the map as an integration of various map elements (see the framework in Figure 1). The idea of this research originates from the recently proposed AutoGPT (Gravitas 2023), which aims to further extend the capabilities of LLMs by equipping them with the ability to call externally defined tools. In AutoGPT, a LLM is used to understand demands, and then think and execute appropriate tools in sequence to solve complicated tasks. This framework follows a chain-of-thought strategy (Wei et al. 2022), it first decomposes a complex task into multiple subtasks; and at each step, it will reason once according to the output from the last step, and subsequently select an appropriate tool to solve a subtask. Some pioneering research validates its effectiveness in various fields, such as computer vision (Wu et al. 2023a, Wang et al. 2023), chemistry (Bran et al. 2023), public health (Dai et al. 2023), and GIS (Zhang et al. 2023).
Inspired by these studies, we decompose the cartographic mapping process as the integration of multiple operations, with every step used for adding or adjusting one map element. In this way, multiple tools are designed in MapGPT, and each tool is designed to control a corresponding map element. For example, a compass tool is used to enable adjustments of the position and visual style of the compass element. Moreover, to enable MapGPT with creative thinking ability, the DALL•E 3 model from OpenAI, one of the most outstanding text-to-image models, is incorporated to design creative and diverse symbol styles. In MapGPT, a large language model is used to first under-stand the demand of users based on natural language descriptions, and subsequently automatically invoke appropriate tools in sequence to generate a map. Furthermore, by leveraging the memory capabilities of large language models, MapGPT provides a user-friendly interactive advantage, which means users can dynamically adjust map elements, including color, annotations, and element positions, through natural language conversations. In conclusion, MapGPT provides a user-friendly mapping experience by utilizing natural language descriptions as the interface for user interactions. This eliminates the high demand for map producers, and MapGPT can also serve as an initial reference for professional map producers. Five case studies have validated the effectiveness of MapGPT in solving complex cartographic mapping tasks, designing appropriate map symbols to represent geographical features, and modifying generated maps in an interactive conversational manner with users.

例如，地图风格是一个关键的设计元素，它通常需要花费大量时间来为不同的应用开发合适的风格（Benová和Pravda 2009年，Christophe等人2016年）。为了解决这个问题，Christophe等人（2022年）提出使用一种生成对抗网络（GAN），能够将地图从简单风格（例如，平面图）转换到更具艺术风格。此外，Kang等人（2019年）采用了基于GAN的模型进行多尺度地图风格转换。随着生成性人工智能的发展，包括文本到图像的模型，如扩散和DALL-E，一些研究人员正在探索基于自然语言描述直接生成地图的方法（Dunkel等人2023年，Courtial等人2023年）。然而，这些方法的一个共同策略是将整个地图作为全局输入，并生成一个新的地图作为输出，这缺乏灵活性，无法考虑和控制地图中的详细元素。换句话说，地图是各种地图元素的集成，使用全局视角的模型难以仅调整这些元素的某些部分。此外，由于所有内容都是由深度模型生成的，生成的地图的不确定性和不透明性也引发了对这些方法的重大伦理关切（Kang等人2023年，Griffin 2020年）。

因此，在本文中，我们提出了一个基于大型语言模型（LLM）的制图框架，名为MapGPT，它可以通过考虑地图作为各种地图元素的集成来用于制图（见图1中的框架）。这项研究的思想来源于最近提出的AutoGPT（Gravitas 2023年），旨在通过配备调用外部定义工具的能力来进一步扩展LLM的能力。在AutoGPT中，一个LLM用来理解需求，然后思考并依次执行适当的工具来解决复杂的任务。这个框架遵循一种思维链策略（Wei等人2022年），它首先将一个复杂的任务分解为多个子任务；在每一步，它会根据上一步的输出进行一次推理，然后选择合适的工具来解决一个子任务。一些开创性的研究验证了其在各个领域的有效性，如计算机视觉（Wu等人2023a年，Wang等人2023年），化学（Bran等人2023年），公共卫生（Dai等人2023年）和地理信息系统（GIS）（Zhang等人2023年）。

受这些研究的启发，我们将制图过程分解为多个操作的集成，每一步都用于添加或调整一个地图元素。这样，MapGPT中设计了多个工具，每个工具都设计用来控制相应的地图元素。例如，使用一个指南针工具来调整指南针元素的位置和视觉风格。此外，为了使MapGPT具有创造性思维能力，将OpenAI的最出色的文本到图像模型之一DALL•E 3模型整合进来，用于设计创造性和多样化的符号风格。在MapGPT中，首先使用大型语言模型来基于自然语言描述理解用户的需求，随后自动依次调用适当的工具生成地图。此外，通过利用大型语言模型的记忆能力，MapGPT提供了用户友好的交互优势，这意味着用户可以通过自然语言对话动态调整地图元素，包括颜色、注释和元素位置。总之，MapGPT通过利用自然语言描述作为用户交互界面，提供了用户友好的制图体验。这消除了对制图生产者的高需求，并且MapGPT还可以作为专业制图生产者的初始参考。五个案例研究验证了MapGPT在解决复杂的制图任务、设计合适的地图符号以表示地理特征以及与用户进行交互式对话方式修改生成的地图方面的有效性。

## # Related work Part-1

Artificial intelligence in cartographic mapping has been studied for a long time, with researchers proposing numerous solutions (WANG 2022). Earlier studies tended to design rule-based expert systems capable of generating maps based on predefined algorithms and operations (Tsorlini et al. 2017, Buttenfield and Mark 1991, Forrest 1999). Subsequently, the focus shifted to deep learning models, leading to the development of interesting mapping applications, such as map style transferring (Christophe et al. 2022, Kang et al. 2019). Currently, with the rise of large models and generative models, particularly Large Language Models (LLMs), applying these models for mapping has garnered significant attention (Tao andXu 2023, Perin et al. 2023). Therefore, this section primarily introduces relevant works based on large models.

在制图领域中，人工智能的应用已经被研究了很长时间，研究者们提出了众多解决方案（王 2022年）。早期的研究倾向于设计基于规则的专家系统，这些系统能够根据预定义的算法和操作生成地图（Tsorlini 等人 2017年，Buttenfield 和 Mark 1991年，Forrest 1999年）。随后，研究重点转向深度学习模型，导致开发出了一些有趣的制图应用，例如地图风格转换（Christophe 等人 2022年，Kang 等人 2019年）。当前，随着大型模型和生成模型的兴起，特别是大型语言模型（LLMs），使用这些模型进行制图的研究引起了重大关注（陶和许 2023年，Perin 等人 2023年）。因此，本节主要介绍基于大型模型的相关工作。

## # Related work Part-2

The advent of LLMs, especially the commercial application of ChatGPT, has drawn the attention of researchers from various disciplines. The robust ability of LLMs to chat, reason, plan, and even engage in creative thinking has both surprised researchers and reinforced the belief that Artificial General Intelligence (AGI) is approaching (Xie et al. 2023). In addition to the development of LLMs, such as the GPT series from OpenAI (Brown et al. 2020, Achiam et al. 2023), the PaLM series from Google (Chowdhery et al. 2023, Anil et al. 2023), and the LLaMa series from Meta AI (Touvron et al. 2023,?), many researchers are also concentrating on various downstream applications of LLMs. For instance, direct applications involve using LLMs for semantic question answering (Tan et al. 2023) and semantic reasoning (Elhafsi et al. 2023), which are common tasks in the field of Natural Language Processing (NLP). Additionally, the emerging reasoning ability of LLMs has captivated researchers, leading to their application in more intricate tasks (Hadi et al. 2023), such as medical education, radiologic decision-making, clinical genetics in the medical field (Kung et al. 2023, Sallam 2023), as well as risk assessment, algorithmic trading, and market prediction in the finance sector (Wu et al. 2023b).

语言模型的出现，特别是商业化的ChatGPT应用，吸引了来自各个学科的研究者的注意。语言模型在聊天、推理、规划，甚至创造性思维方面的强大能力，既让研究者感到惊讶，又加强了人工通用智能（AGI）即将到来的信念（Xie等，2023年）。除了语言模型的发展，例如来自OpenAI的GPT系列（Brown等，2020年；Achiam等，2023年）、Google的PaLM系列（Chowdhery等，2023年；Anil等，2023年）以及Meta AI的LLaMa系列（Touvron等，2023年，？），许多研究者也在专注于语言模型的各种下游应用。例如，直接应用包括将语言模型用于语义问答（Tan等，2023年）和语义推理（Elhafsi等，2023年），这些是自然语言处理领域的常见任务。此外，语言模型新兴的推理能力吸引了研究者的注意，导致它们在更复杂的任务中的应用（Hadi等，2023年），如医学教育、放射学决策制定、医学领域的临床遗传学（Kung等，2023年；Sallam，2023年），以及金融领域的风险评估、算法交易和市场预测（Wu等，2023b年）。

## # Related work Part-3

In the GIS domain, researchers have also investigated whether LLMs can solve relevant problems. For example, Mai et al. (2023) applied multiple LLMs for different geospatial tasks, which demonstrated the effectiveness of LLMs on some professional GIS tasks. Hu et al. (2023) integrated LLMs to improve the extraction of location descriptions from disaster-related social media messages. Some researchers also applied LLMs for cartographic mapping. For example, Juhász et al. (2023) used ChatGPT as a mapping assistant, which is capable of turning natural language text descriptions into the correct attribute tagging of road features in digital maps. Tao and Xu (2023) tested the effectiveness of ChatGPT in designing thematic maps using geospatial data, as well as creating mental maps purely using textual descriptions of geographic space. In this work, ChatGPT takes the textual descriptions of users as prompt, and output code that can be used for mapping by running them in an external IDE. Feng et al. (2023) proposed to use LLMs to translate natural language questions into SPARQL queries, which can subsequently be used to retrieve geospatial information from Wikidata, and finally generate interactive maps.

在地理信息系统（GIS）领域，研究人员也探讨了大型语言模型（LLMs）是否能解决相关问题。例如，Mai等人（2023年）应用了多个LLMs来执行不同的地理空间任务，这证明了LLMs在一些专业GIS任务上的有效性。Hu等人（2023年）将LLMs整合用于提升从灾难相关社交媒体消息中提取地点描述的能力。一些研究者还将LLMs应用于制图。例如，Juhász等人（2023年）使用ChatGPT作为制图助手，它能将自然语言文本描述转换为数字地图中道路特征的正确属性标签。Tao和Xu（2023年）测试了ChatGPT利用地理空间数据设计专题地图以及仅使用地理空间文本描述创建心智地图的有效性。在这项工作中，ChatGPT接受用户的文本描述作为提示，并输出可以通过在外部IDE中运行用于制图的代码。Feng等人（2023年）提议使用LLMs将自然语言问题翻译成SPARQL查询，这些查询随后可以用来从Wikidata检索地理空间信息，并最终生成交互式地图。

## # Related work Part-4

However, though LLMs have demonstrated impressive performance across tasks, it is still a challenge to solve complex tasks merely based on their inherent knowledge (Manvi et al. 2023, Zheng et al. 2023). As mentioned in the Introduction, there are various map elements and multiple parameters to control the detail of each element during the mapping process. In this way, though the method in Tao and Xu (2023) can use ChatGPT to generate codes for mapping, it is difficult to fit complex situations, where the mapping process is complex and requires various map elements. To extend the ability of LLMs to various fields, researchers proposed to equip them with professional tools (Ruan et al. 2023). For example, LLMs present to be weak at calculating; however, they can be equipped with a Calculator tool, which can be used for accurate calculating. In this way, LLMs only need to think and reason to determine the input of the Calculator tool, while thinking and reasoning are also their strength, and complex calculating processes can be finished by the professional tool. The framework of integrating LLMs with extended professional tools has been validated by studies from various domains, such as computer vision (Wu et al. 2023a, Wang et al. 2023), chemistry (Bran et al. 2023), health (Dai et al. 2023), remote sensing (Guo et al. 2024), and also GIS (Zhang et al. 2023).
With these prior contributions, this paper proposes an autonomous framework for cartographic mapping with a large language model, which can used for mapping by transferring the role of LLMs from direct map producers (e.g., output code for mapping) to a controller or decision-maker who determines the use of various tools for mapping. In other words, rather than directly output or generate a map by LLMs, the exceptional ability of LLMs in language understanding, interaction, and reasoning is used for analyzing demands and selecting appropriate mapping tools to solve complex mapping tasks.

然而，尽管大语言模型(LLMs)在各种任务中表现出了令人印象深刻的性能，但仅基于它们固有的知识来解决复杂任务仍然是一项挑战(Manvi等，2023年; Zheng等，2023年)。正如介绍中所提到的，地图制作过程涉及各种地图元素和多个参数，需要在制图过程中控制每个元素的细节。通过这种方式，尽管Tao和Xu(2023年)的方法可以利用ChatGPT生成制图代码，但在制图过程复杂且需要多种地图元素的情况下，很难适应。为了扩展LLMs在各个领域的能力，研究人员提出了为其配备专业工具的方法(Ruan等，2023年)。例如，LLMs在计算方面表现较弱；然而，它们可以配备一个计算器工具，用于准确计算。通过这种方式，LLMs只需思考和推理来确定计算器工具的输入，而思考和推理也是它们的优势，复杂的计算过程可以通过专业工具完成。将LLMs与扩展的专业工具集成的框架已经得到了来自各个领域的研究的验证，例如计算机视觉(Wu等，2023年a; Wang等，2023年)、化学(Bran等，2023年)、健康(Dai等，2023年)、遥感(Guo等，2024年)，以及地理信息系统(GIS)(Zhang等，2023年)。

在这些先前的贡献基础上，本文提出了一个自主的地图制图框架，使用大型语言模型，该框架可以通过将LLMs的角色从直接的地图制作者(例如，为制图输出代码)转变为控制器或决策者，决定使用各种工具来进行地图制图。换句话说，与其直接由LLMs输出或生成地图，借助LLMs在语言理解、交互和推理方面的出色能力，可以分析需求并选择适当的制图工具来解决复杂的制图任务。

## # Framework

The framework of MapGPT is presented in Figure 1. Specifically, there are two major modules in MapGPT, including a large language model module and a professional tool module. In the first module, a Large Language Model (LLM) is used to interpret demands, plan tasks, and reason based on current observation, leveraging the robust ability of language understanding and reasoning inherent in LLMs. To equip the agent with mapping ability, a mapping tool module is also designed, where there is a total of 59 professional mapping tools that can be used to design, add, and adjust map elements. Given a specific mapping task (such as the demand in Figure 1), the agent first thinks and plans the task, and subsequently decomposes the complex mapping task into multiple subtasks. Secondly, to solve each subtask, the used LLM will call an appropriate tool in the mapping tool module to add or adjust a map element in the current step, and this process will iterate until the LLM believes this mapping task is finished.
In our experiments, we utilize the GPT-4 (0613 version) model, recognized as one of the most outstanding LLMs, as the model of MapGPT, configuring the temperature to 0. Temperature, a parameter ranging from 0 to 1, is generally used to modulate the level of randomness and variability in the outputs generated by LLMs. Higher temperature values induce greater randomness and diversity in the model outputs, whereas lower temperature values result in increased determinism and reduced randomness in the model responses. In this framework, the LangChain framework (Chase, 2022) is employed to establish the connection between the LLM and our designed mapping tool module, which will be detailed in Section 3.2. Finally, all the mapping tools in the mapping tool module will be detailed in Section 3.3.

MapGPT框架在图1中展示。具体来说，MapGPT包含两个主要模块，包括一个大型语言模型（LLM）模块和一个专业工具模块。在第一个模块中，使用大型语言模型（LLM）来解释需求、计划任务，并基于当前的观察进行推理，利用LLM固有的语言理解和推理能力。为了使代理具备制图能力，还设计了一个制图工具模块，在此模块中，总共有59种专业制图工具可用于设计、添加和调整地图元素。针对特定的制图任务（如图1中的需求），代理首先思考和计划任务，然后将复杂的制图任务分解为多个子任务。其次，为了解决每个子任务，使用的LLM将在制图工具模块中调用适当的工具来添加或调整当前步骤中的地图元素，此过程将迭代进行，直到LLM认为此制图任务已完成。

在我们的实验中，我们使用被认为是最出色的LLM之一的GPT-4（0613版本）作为MapGPT的模型，并将温度参数设置为0。温度是一个从0到1的参数，通常用于调节LLM生成的输出中的随机性和多样性。较高的温度值会引发模型输出中更大的随机性和多样性，而较低的温度值则会增加决定性并减少模型响应中的随机性。在此框架中，使用LangChain框架（Chase，2022）来建立LLM与我们设计的制图工具模块之间的连接，这将在第3.2节中详细介绍。最后，所有的制图工具在制图工具模块中将在第3.3节中详细说明。

## # The environment to connect LLMs with the mapping tool module

Generally, LLMs can only take text as input and also output text as a response. Thus, to equip LLMs with professional mapping tools, an environment is needed to establish a connection with the mapping tool module. In this paper, the LangChain framework (Chase, 2022) is employed to connect LLMs with tools. Specifically, LangChain is a framework designed for the development of applications leveraging large language models. Its primary objective is to facilitate developers in seamlessly integrating additional data sources and interacting with other tools. To achieve this, LangChain offers multiple components, such as prompts, memory, chains, and agents.
First, the prompts are the guidance input to the LLMs, which are designed based on user demands. With an appropriate prompt, LLMs can generate better responses. In this paper, we design the prompt presented in Figure 2, which is learned from the prompts in similar frameworks used in the chemistry and GIS domains, to guide the employed LLM in identifying and using appropriate mapping tools for mapping. Second, the memory component in LangChain can help LLMs memorize previous information. With this component, the context of preceding dialogues can be stored and incorporated when interacting with the LLM. In this way, MapGPT can adjust map elements based on users' subsequent demands. Then, the chain is one of the most important building blocks of LangChain. Specifically, with the chain, users can customize the reasoning process of LLMs, and it can also decompose a complex task into multiple subtasks, which can atomize and simplify the complex mapping process. Finally, the agent can choose which tool in the mapping tool module to use in each step. In this way, professional tools can be effectively integrated with the LLMs. 

通常情况下，大型语言模型（LLMs）仅能以文本作为输入并输出文本。因此，为了使LLMs能够搭配专业的制图工具使用，需要一个环境来建立与制图工具模块的连接。在本文中，我们采用了LangChain框架（Chase, 2022）来连接LLMs和工具。具体来说，LangChain是一个为利用大型语言模型开发应用程序而设计的框架。它的主要目标是帮助开发者无缝集成额外的数据来源并与其他工具进行交互。为了实现这一点，LangChain提供了多个组件，例如提示（prompts）、记忆（memory）、链（chains）和代理（agents）。

首先，提示是对LLMs的引导输入，这些提示是根据用户需求设计的。通过合适的提示，LLMs能够生成更好的响应。在本文中，我们设计了图2中展示的提示，这个提示是基于在化学和地理信息系统（GIS）领域中使用的类似框架的提示来学习的，用以指导所采用的LLM识别和使用适当的制图工具进行制图。其次，LangChain中的记忆组件可以帮助LLMs记住之前的信息。通过这个组件，可以存储并在与LLM交互时融合之前对话的上下文。这样，MapGPT就可以根据用户后续的需求调整地图元素。然后，链是LangChain的最重要的构建模块之一。具体来说，通过链，用户可以定制LLMs的推理过程，并且还可以将复杂任务分解成多个子任务，从而使复杂的制图过程自动化和简化。最后，代理可以选择在每一步中使用制图工具模块中的哪一个工具。通过这种方式，专业工具可以有效地与LLMs集成。

## # Mapping tool module

In this section, our designed mapping tool module is presented in Figure 3. Specifically, there are a total of 59 professional mapping tools in this module. With these tools, all the map elements can be added and adjusted according to user demands. These tools are classified into five parts, and all the details of them are presented in Appendix A.
• Tools for Initial Map Creation (Figure 3a). Given geospatial data specified by users, tools in this part are used to construct the map framework. Specifically, the tool map initial is used to define the envelope and coordinate system based on the given geospatial data provided by users, and to set the background color according to user demands (if any). In this way, the framework of a map can be defined. • Tools for Adding Map layers (Figure 3b). Then, multiple map layers can be added by the map add layer tool. Since users may have various demands for the representation of different map layers, some tools are also designed to control the details of layers. For example, modify area color can be utilized to manage the color of an area shapefile, while modify area color by attribute allows the shapes in a file to be presented with different colors based on their attribute values. The tools of modify line style, modify line width, modify line color, modify point size, and modify point color provide similar functions that can be used for line shapefile and point shapefile. Moreover, as simple symbol designs may not meet user demands, we leverage one of the most prominent text-to-image models, DALL•E 3, to generate map symbols capable of representing geographical entities. During the mapping process, the employed LLM will interpret user demands and automatically invoke the modify symbol tool to generate an appropriate symbol representing the geographical entities.
In this paper, we also designed a prompt for this tool to guide the DALL•E 3: "Please help me design a map symbol that represents keywords. Try to keep it simple and understandable, using only one color tone and reflecting the style of a simple drawing. There should be as few elements as possible. Try to present only the symbol I need.". The keywords will be automatically recognized and filled by the used LLM based on user demands. Moreover, owing to the inherent stochasticity in the outcomes generated by DALL•E 3, in order to cater to user demands, we have facilitated the concurrent generation of three images by DALL•E 3. Then, we design an interactive mechanism that allows users to select a preferred image from the generated options to serve as the designated symbol. • Tools for Modifying Map Elements (Figure 3c). Moreover, tools for modifying the parameters of each map element are also designed. For instance, the location, width, color, and style of the compass can be adjusted using the tools modify compass location, modify compass width, modify compass color, and modify compass style, respectively. These tools for modifying map elements allow our MapGPT to be more flexible in addressing user demands. Considering that users may require the latest information for annotation on the map, a search tool is also designed, allowing the search for the most recent information on websites. • Tools for Adding Map Elements (Figure 3d). After modifying the parameters of map elements, tools are designed to add them to the map, including the map add compass, map add scalebar, map add frame, map add legend, map add title, map add textannotation for adding map elements of the compass, scale bar, map frame, legend, title, and text annotations. • A Tool for Map Saving (Figure 3e). Finally, with all the map elements added, the generated map can be output by the map save tool.
To sum up, with these designed tools, our MapGPT can comprehend user demands based on natural language descriptions and automatically invoke appropriate tools in sequence to generate maps. Moreover, since the tools can be utilized to adjust map elements in fine detail, our framework can satisfy various user demands. Case studies in the next section will elaborate on the details of how MapGPT works. 

在本节中，我们设计的地图工具模块如图3所示。具体而言，该模块中共有59个专业地图工具。利用这些工具，所有的地图元素都可以根据用户的需求进行添加和调整。这些工具被分类为五个部分，并且它们的所有细节都在附录A中呈现。
• 初始地图创建工具（图3a）。给定用户指定的地理空间数据，此部分中的工具用于构建地图框架。具体而言，工具地图初始化用于根据用户提供的地理空间数据定义信封和坐标系统，并根据用户的要求设置背景颜色（如果有）。通过这种方式，地图的框架可以被定义。
• 添加地图图层工具（图3b）。然后，通过地图添加图层工具可以添加多个地图图层。由于用户可能对不同地图图层的表示有各种需求，一些工具也被设计用于控制图层的细节。例如，修改区域颜色可以用于管理区域形状文件的颜色，而根据属性值修改区域颜色允许文件中的形状以不同的颜色呈现，基于它们的属性值。修改线条样式、修改线条宽度、修改线条颜色、修改点大小和修改点颜色的工具提供类似的功能，可用于线形状文件和点形状文件。此外，由于简单的符号设计可能不符合用户的需求，我们利用最突出的文本到图像模型之一，即OpenAI的DALL•E 3，生成能够代表地理实体的地图符号。在制图过程中，所使用的LLM将解释用户需求，并自动调用修改符号工具以生成代表地理实体的适当符号。
在本文中，我们还为该工具设计了一个提示，以指导DALL•E 3：“请帮助我设计一个代表关键词的地图符号。尽量保持简单易懂，只使用一种色调，反映简单绘图的风格。元素应尽可能少。尽量只呈现我需要的符号。”关键词将根据用户需求自动被所使用的LLM识别和填充。此外，由于DALL•E 3生成的结果具有固有的随机性，为了满足用户需求，我们已经促成了DALL•E 3同时生成三个图像的并行生成。然后，我们设计了一个交互机制，允许用户从生成的选项中选择一个首选图像作为指定的符号。
• 修改地图元素参数工具（图3c）。此外，还设计了用于修改每个地图元素参数的工具。例如，可以使用修改指南针位置、修改指南针宽度、修改指南针颜色和修改指南针样式的工具来调整指南针的位置、宽度、颜色和样式。这些用于修改地图元素的工具使得我们的MapGPT在满足用户需求方面更加灵活。考虑到用户可能需要地图上的最新信息进行注释，还设计了一个搜索工具，允许在网站上搜索最新信息。
• 添加地图元素工具（图3d）。在修改地图元素参数后，设计了工具将它们添加到地图上，包括地图添加指南针、地图添加比例尺、地图添加框架、地图添加图例、地图添加标题和地图添加文本注释，用于添加指南针、比例尺、地图框架、图例、标题和文本注释的地图元素。
• 地图保存工具（图3e）。最后，添加了所有地图元素后，生成的地图可以通过地图保存工具输出。
综上所述，借助这些设计的工具，我们的MapGPT可以根据自然语言描述理解用户需求，并自动调用适当的工具序列生成地图。此外，由于这些工具可以用于微调地图元素，我们的框架可以满足各种用户需求。下一节的案例研究将详细阐述MapGPT的工作原理。

## # Case studies

In this section, we have conducted five case studies to test the effectiveness of the proposed MapGPT in solving complex cartographic mapping tasks (Section 4.1), designing appropriate map symbols to represent geographical features (Section 4.2), and modifying generated maps in an interactive conversational manner with users (Section 4.3).

# 案例研究

在本节中，我们进行了五个案例研究，以测试所提出的MapGPT在解决复杂的地图绘制任务（第4.1节）、设计适当的地图符号以表示地理特征（第4.2节）以及与用户进行互动式对话修改生成地图的有效性（第4.3节）。

## # Case 1

In this case, the query "generate a map titled . . . in 2023" is input to MapGPT, and the used data is also specified (see Figure 4). Then, MapGPT starts to solve this mapping task. Since we have defined its workflow in the prompt in Figure 2, MapGPT can understand how to solve this task.
Therefore, it first initializes the map, including modifying the initial settings of the map, such as setting the background color. After that, it will add corresponding layers. Since detailed demands of different layers have been specified in the query, MapGPT will first define the parameters of different layers based on the query by invoking some "modify " tools, such as using the tools of modify line width and modify line color to define the width and colors of liner layers, respectively. After these parameters have been defined, it will invoke the map add layer tool to add corresponding geographical features. Then, after the layers have been added, MapAgent will add other map elements, such as the compass, legend, scale bar, and frame. Since the query requires the map title and annotation of "the GDP development of Guangdong Province in China in 2023", MapGPT also adds them. In this case, the annotation is generated by the knowledge inherent in the used LLM (GPT-4). Finally, the mapping task is finished, and the result is presented in Figure 5.  

在这个案例中，查询"在2023年生成标题为...的地图"被输入到MapGPT中，并且使用的数据也被指定（见图4）。然后，MapGPT开始解决这个映射任务。由于我们在图2的提示中定义了其工作流程，MapGPT可以理解如何解决这个任务。因此，它首先初始化地图，包括修改地图的初始设置，比如设置背景颜色。之后，它将添加相应的图层。由于在查询中已经指定了不同图层的详细要求，MapGPT将首先根据查询来定义不同图层的参数，通过调用一些“修改”工具，比如使用修改线宽和修改线颜色工具来分别定义线条图层的宽度和颜色。在这些参数被定义之后，它将调用地图添加图层工具来添加相应的地理特征。然后，在添加了图层之后，MapAgent将添加其他地图元素，比如指南针、图例、比例尺和框架。由于查询要求地图的标题和"中国广东省2023年的GDP发展"的注释，MapGPT也会添加它们。在这种情况下，注释是由所使用的LLM（GPT-4）内在的知识生成的。最后，映射任务完成了，结果呈现在图5中。

## # Case 2

In this case, the query is designed to generate a map consisting of map layers with different styles in Case 1. Specifically, the query "generate a map titled . . . 2022" is input to MapGPT (Figure 6). Similarly, MapGPT can also understand the demand, and subsequently invoke appropriate tools to solve this mapping task like that in Case 1. Differently, in this query, we ask MapGPT to add an annotation of "the GDP value of Wuhan city in 2022". Compared with the demand of "introduce the GDP development of Guangdong Province in China in 2023" in Case 1, this is a demand that needs a very accurate value index. In this way, the used LLM in MapGPT will invoke the search tool to search for the accurate GDP value of Wuhan on websites and finally return the results that can be annotated on the map (Figure 7). Therefore, this case reveals that MapGPT can accurately understand user demand and solve different mapping tasks with diverse requirements.  

在这个案例中，查询被设计为生成一个由不同风格的地图层组成的地图，如案例1中所示。具体地，输入查询：“生成一个标题为...2022的地图”到MapGPT（图6）。同样，MapGPT也能理解需求，随后调用相应的工具来解决这个绘图任务，就像在案例1中那样。不同的是，在这次查询中，我们要求MapGPT增加一个“2022年武汉市GDP值”的注释。与案例1中的需求“介绍2023年中国广东省的GDP发展”相比，这是一个需要非常准确的值指标的需求。因此，MapGPT中使用的大型语言模型将调用搜索工具在网站上搜索武汉的准确GDP值，并最终返回可以在地图上注释的结果（图7）。因此，这个案例显示了MapGPT能准确理解用户需求，并解决具有多样化要求的不同绘图任务。

## # Case 3

As designing map symbols to accurately represent different geographical features poses a challenge for mapping producers, this task is designed to explore the capability of MapGPT in symbol design. In MapGPT, DALL•E 3, one of the most outstanding textto-image models, is used to generate symbols. Specifically, MapGPT first interprets user demands and subsequently decides on the invocation of DALL•E 3 along with the corresponding input parameters. Considering the inherent randomness in the results produced by DALL•E 3, we have designed a strategy to enhance user satisfaction. Specifically, DALL•E 3 is employed to simultaneously generate three different images, subsequently, an interactive mechanism empowers users to choose a preferred image from the candidates, ultimately serving as the designated symbols (see the orange box in Figure 8).
In this case, given the query "generate a map titled . . . vector layer." (Figure 8), MapGPT will first initialize a map like the process in previous cases. Then, since the query specified the demand to design symbols for the input data, MapGPT will invoke the modify symbol tool (i.e, DALL•E 3 as the core) to generate two symbols, and subsequently add the two layers with corresponding symbols, respectively. From the results in Figure 9, it can be observed that MapGPT can effectively interpret user demand and then invoke DALL•E 3 to generate appropriate symbols to represent corresponding geographical features.  

作为设计地图符号以准确表示不同地理特征对制图生产者构成挑战，此任务旨在探索MapGPT在符号设计方面的能力。在MapGPT中，DALL•E 3作为最杰出的文本到图像模型之一，被用于生成符号。具体而言，MapGPT首先解释用户需求，随后决定是否调用DALL•E 3以及相应的输入参数。考虑到DALL•E 3产生的结果具有固有的随机性，我们设计了一种策略以提高用户满意度。具体而言，DALL•E 3被用于同时生成三种不同的图像，随后，一个交互式机制赋予用户从候选项中选择首选图像的能力，最终作为指定的符号（见图8中的橙色框）。

在这种情况下，给定查询"生成一个名为...的矢量图层的地图。"（见图8），MapGPT将首先像前面的案例中的过程一样初始化地图。然后，由于查询指定了为输入数据设计符号的需求，MapGPT将调用修改符号工具（即，以DALL•E 3为核心）生成两个符号，随后分别添加两个带有相应符号的图层。从图9的结果可以看出，MapGPT能够有效解释用户需求，然后调用DALL•E 3生成适当的符号来表示相应的地理特征。

## # Modifying generated maps in an interactive conversational manner with users

Since cartographical mapping is a subjective task, users may not always be satisfied with the maps generated by MapGPT, and sometimes they may want to adjust certain elements (e.g., location and color) on the generated maps. Therefore, MapGPT is designed to be capable of modifying generated maps in an interactive conversational manner with users. In this section, two cases are designed to showcase this ability of MapGPT.

由于制图是一项主观任务，用户可能并不总是满意MapGPT生成的地图，有时他们可能希望调整生成的地图上的某些元素（例如位置和颜色）。因此，MapGPT被设计成能够以与用户进行互动式对话的方式修改生成的地图。本节设计了两个案例来展示MapGPT的这种能力。

## # Case 4

In this case, we simulate a realistic cartographic mapping scene. Initially, as illustrated in Figure 10, a query similar to those in previous cases is input into MapGPT. Subsequently, MapGPT outputs a result satisfying the mapping demand (refer to Figure 11). However, given that cartographic mapping is inherently subjective, the generated result by MapGPT may not entirely align with user preferences. As a solution, users have the option to instruct MapGPT to revise or fine-tune the result, specifying adjustments like adjust the color' and 'design a new symbol' in a subsequent query. Consequently, MapGPT generates a new map, taking into account the combined demands from both queries. This case highlights MapGPT's flexibility in addressing diverse user demands. Furthermore, its capability to modify map elements on a fine scale positions MapGPT as a valuable tool for generating an initial draft for professional mapping producers. Subsequently, it can be further refined based on additional requirements from professionals. This suggests that MapGPT holds potential for use by both professional and non-professional users.
Figure 10. The process of MapGPT to solve a mapping task. Initially, MapGPT accepts user demands described in query 1 and produces corresponding mapping results. Subsequently, the user may request further modifications to the output, leading to query 2. In response to this situation, MapGPT retains the information from query 1, adjusts some map elements based on the demands in Query 2, and ultimately generates a mapping result that satisfies both query 1 and query 2. 

在这个案例中，我们模拟了一个真实的制图场景。首先，如图10所示，输入了一个类似于前几个案例的查询到MapGPT中。随后，MapGPT输出了一个满足制图需求的结果（参见图11）。然而，由于制图本质上是主观的，MapGPT生成的结果可能不完全符合用户的偏好。作为解决方案，用户可以选择指示MapGPT对结果进行修订或微调，在随后的查询中指定调整，比如调整颜色'和'设计一个新的符号'。因此，MapGPT生成了一个新的地图，考虑了来自两个查询的结合需求。这个案例突显了MapGPT在应对多样化用户需求方面的灵活性。此外，其在微观尺度上修改地图元素的能力将MapGPT定位为生成专业制图产品初始草稿的有价值工具。随后，可以根据专业人士的额外要求进一步完善。这表明MapGPT具有潜力被专业和非专业用户使用。
图10. MapGPT解决制图任务的过程。首先，MapGPT接受了用户在查询1中描述的需求，并产生了相应的制图结果。随后，用户可能会要求对输出进行进一步修改，导致查询2。针对这种情况，MapGPT保留了来自查询1的信息，根据查询2中的需求调整了一些地图元素，最终生成了满足查询1和查询2的制图结果。

## # Case 5

In this case, the query "generate a map using the data from . . . " is input into MapGPT, as depicted in Figure 12. Subsequently, MapGPT produces the mapping result. Following this, adjustments can be made to detailed map elements, such as the color of polygon features and the position of the legend, in response to additional requirements. In this manner, the outcomes illustrated in Figure 13 for this case further demonstrate the robustness of MapAgent in both conversational and semantic understanding.  

在本案例中，查询语句“使用……数据生成地图”被输入到MapGPT中，如图12所示。随后，MapGPT产生了映射结果。在此之后，可以根据额外的需求对地图的详细元素进行调整，例如多边形特征的颜色和图例的位置。以这种方式，如图13所示，本案例进一步展示了MapAgent在会话和语义理解方面的稳健性。

## # Conclusion

In this paper, we introduce MapGPT, an autonomous framework for cartographic mapping employing a large language model. MapGPT offers a user-friendly mapping experience by leveraging natural language descriptions as the interface for user interactions. Within this framework, we employ GPT-4 (0613 version), one of the most prominent LLMs, as the core to drive the mapping process. This process involves initially understanding and interpreting user demands, followed by the utilization of professional mapping tools for map creation. In this study, a map is conceptualized as the integration of various map elements. To support fine-scale mapping, we design a professional mapping tool module comprising 59 tools dedicated to controlling the details of corresponding map elements. Additionally, the proposed framework incorpo-rates the LangChain framework, facilitating conversational abilities. This integration enables MapGPT users to refine their demands throughout the entire mapping task. Finally, we have conducted five case studies to validate the effectiveness of MapGPT in solving complex cartographic mapping tasks, designing appropriate map symbols to represent geographical features, and modifying generated maps in an interactive conversational manner with users. Future work will continue to focus on enhancing the mapping capabilities and user interaction effectiveness of MapGPT.  Map Saving map save Generating the designed map.

本文介绍了MapGPT，这是一种利用大型语言模型进行制图的自主框架。MapGPT通过自然语言描述作为用户交互界面，提供了用户友好的制图体验。在该框架中，我们使用了最著名的LLMs之一，GPT-4（0613版本）作为核心来驱动制图过程。该过程首先理解和解释用户需求，然后利用专业制图工具进行地图创建。在本研究中，地图被概念化为各种地图元素的集成。为了支持细粒度的制图，我们设计了一个专业的制图工具模块，其中包含59个专门用于控制相应地图元素细节的工具。此外，该框架还结合了LangChain框架，增强了对话能力。这一集成使得MapGPT用户能够在整个制图任务中细化他们的需求。最后，我们进行了五个案例研究，以验证MapGPT在解决复杂制图任务、设计适当的地图符号以表示地理特征以及与用户进行互动对话修改生成地图方面的有效性。未来的工作将继续致力于增强MapGPT的制图能力和用户交互的有效性。

## # 

Turn on the longitude and latitude labels and tick marks on the map frame. modify frame markers fontsize Modify the font size of the longitude and latitude markers on the map frame.

在地图框架上开启经纬度标签和刻度线。修改框架标记的字体大小，调整地图框架上经纬度标记的字体大小。

